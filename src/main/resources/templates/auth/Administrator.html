<!DOCTYPE HTML>
<html xmlns:th="http://www.thymeleaf.org/" xmlns:sec="http://www.w3.org/1999/xhtml" lang="">
<head>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-aFq/bzH65dt+w6FI2ooMVUpc+21e0SRygnTpmBvdBgSdnuTN7QbdgL+OapgHtvPp" crossorigin="anonymous">
  <title>관리자 페이지</title>
</head>
<body class="bg-body-tertiary">
<th:block th:if="${session.role != 'Administrator'}">
  <main class="container">
    <br>
    <h1>관리자 페이지</h1>

    <div class="d-flex text-body-secondary pt-3">
      <svg class="bd-placeholder-img flex-shrink-0 me-2 rounded" width="32" height="32" xmlns="http://www.w3.org/2000/svg" role="img" aria-label="Placeholder: 32x32" preserveAspectRatio="xMidYMid slice" focusable="false"><title>Placeholder</title><rect width="100%" height="100%" fill="#ddssss"/><text x="35%" y="50%" fill="white" dy=".3em">A</text></svg>
      <div class="pb-3 mb-0 small lh-sm border-bottom w-100">
        <div class="d-flex justify-content-between">
          <strong class="text-gray-dark" th:text="${session.userid}">@이름</strong>
        </div>
        <span class="d-block" th:text="${session.userid}">@아이디</span>
      </div>
      <form th:action="@{/auth/logout}" method="POST" sec:authorize="isAuthenticated()"><button class="w-100 btn btn-sm btn-primary rounded" type="submit">logout</button></form>
    </div>

    <div class="my-3 p-3 bg-body rounded shadow-sm">
      <h6 class="border-bottom pb-2 mb-0">Users</h6>
      <div th:each="item : ${UserList}" class="d-flex text-body-secondary pt-3">
        <svg class="bd-placeholder-img flex-shrink-0 me-2 rounded" width="32" height="32" xmlns="http://www.w3.org/2000/svg" role="img" aria-label="Placeholder: 32x32" preserveAspectRatio="xMidYMid slice" focusable="false"><title>Placeholder</title><rect width="100%" height="100%" fill="#007bff"/><text th:text="${item.ID}" x="36%" y="50%" fill="white" dy=".3em"></text></svg>
        <div class="pb-3 mb-0 small lh-sm border-bottom w-100">
          <div>
              <div class="d-flex justify-content-between">
                  <strong class="text-gray-dark" th:text="${item.ROLE}"></strong>
                  <form th:if="${item.ACCESS} == 'deny'" action="/auth/access" method="post">
                    <input type="text" hidden="hidden" id="userid" name= "userid" th:value="${item.USERID}">
                    <strong class="text-gray-dark" th:text="${item.ACCESS}"></strong>
                    <button class="btn btn-primary rounded" style="font-size: smaller" type="submit">승인</button>
                  </form>
                <form th:if="${item.ACCESS} == 'allow'" action="/auth/user/delete" method="post">
                  <input type="text" hidden="hidden" id="userid" name= "userid" th:value="${item.USERID}">
                  <button class="btn btn-primary rounded" style="font-size: smaller" type="submit">삭제</button>
                </form>
              </div>
            <span class="d-block" th:text="${item.USERID}">@아이디</span>
          </div>
        </div>
      </div>
      <small class="d-block text-end mt-3">
        <a href="#">All suggestions</a>
      </small>
    </div>
  </main>
</th:block>
</body>
</html>