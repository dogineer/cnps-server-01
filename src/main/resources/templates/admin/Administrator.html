<!DOCTYPE HTML>
<html xmlns:th="http://www.thymeleaf.org/"
      xmlns:sec="http://www.w3.org/1999/xhtml" lang="">
<head>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-aFq/bzH65dt+w6FI2ooMVUpc+21e0SRygnTpmBvdBgSdnuTN7QbdgL+OapgHtvPp" crossorigin="anonymous">
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ENjdO4Dr2bkBIFxQpeoTz1HIcje39Wm4jDKdf19U8gI4ddQ3GYNS7NTKfAdVQSZe" crossorigin="anonymous"></script>
  <title>관리자 페이지</title>
</head>

<body class="bg-body-tertiary">
<th:block th:if="${session.role != 'Administrator'}">
  <th:block th:replace="fragments/header :: headerFragment"></th:block>
  <th:block th:replace="~{/admin/NoticeWrite :: NoticeWrite}"></th:block>
  <th:block th:replace="~{/auth/passwordChange :: passwordChange}"></th:block>
  <th:block th:replace="~{/auth/Notice :: Notice}"></th:block>

  <main class="container">
    <div class="my-3 p-3 bg-body rounded shadow-sm">
      <h6 class="border-bottom pb-2 mb-0"><strong>유저목록</strong></h6>
      <div class="d-flex text-body-secondary pt-3">
        <div class="pb-3 mb-0 small lh-sm border-bottom w-100">
          <div class="table-responsive">
            <table class="table table-striped table-sm">
              <thead>
                <tr>
                  <th scope="col">No</th>
                  <th scope="col">이름</th>
                  <th scope="col">전화번호</th>
                  <th scope="col">부서</th>
                  <th scope="col">아이디</th>
                  <th scope="col">권한</th>
                  <th scope="col">이메일</th>
                  <th scope="col">설명</th>
                  <th scope="col">가입날짜</th>
                  <th scope="col">요청</th>
                </tr>
              </thead>

              <tbody th:each="item : ${UserList}">
                <tr style="vertical-align: middle">
                  <td th:text="${item.ID}"></td>
                  <td th:text="${item.NAME}"></td>
                  <td th:text="${item.PHONE}"></td>
                  <td th:text="${item.DEPARTMENT}"></td>
                  <td th:text="${item.USERID}"></td>
                  <td th:if="${item.ROLE} == 'Administrator'">
                    <svg class="bd-placeholder-img flex-shrink-0 me-2 rounded" width="32" height="32"><rect width="100%" height="100%" fill="#ddssss"/><text x="36%" y="50%" fill="white" dy=".3em">A</text></svg>
                  </td>
                  <td th:if="${item.ROLE} == 'USER'">
                    <svg class="bd-placeholder-img flex-shrink-0 me-2 rounded" width="32" height="32"><rect width="100%" height="100%" fill="#007bff"/><text x="35%" y="53%" fill="white" dy=".3em">U</text></svg>
                  </td>
                  <td th:text="${item.EMAIL}"></td>
                  <td th:text="${item.DESCRIPTION}"></td>
                  <td th:text="${item.JOIN_DATE}"></td>
                  <td>
                    <form th:if="${item.ACCESS} == 'deny'" th:action="'/auth/user/access/' + ${item.USERID} +'/' + ${item.ACCESS}" method="post">
                      <button class="btn btn-primary rounded" style="font-size: smaller" type="submit">승인</button>
                    </form>
                    <form th:if="${item.ACCESS} == 'allow'" th:action="'/auth/user/delete/' + ${item.USERID}" method="post">
                      <button class="btn btn-warning rounded" style="font-size: smaller" type="submit">삭제</button>
                    </form>
                  </td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>
      </div>
    </div>
  </main>
</th:block>
</body>
</html>